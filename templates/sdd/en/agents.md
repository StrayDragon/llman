<!-- llman-template-version: 1 -->
# LLMAN Spec-Driven Development (SDD)

These instructions are for AI assistants working in this repository.

When a request:
- mentions proposal/spec/change/plan
- introduces a new feature, breaking change, architecture shift, or large performance/security work
- is ambiguous and needs authoritative specs

Use llmanspec and the `llman sdd` workflow.

Quick commands:
- `llman sdd list`
- `llman sdd show <item>`
- `llman sdd validate <id> --strict --no-interactive`
- `llman sdd archive <id>`
- `llman sdd update-skills --all`

Project context:
- `llmanspec/project.md` captures conventions and constraints.

Locale + skills:
- `llmanspec/config.yaml` sets `locale` and skills paths.
- Locale affects templates and skills only; CLI output stays English.
- Regenerate skills with `llman sdd update-skills`.

Only use AGENTS.md context injection.

OPSX entrypoints:
- Claude Code: prefer managed `/opsx:*` workflow commands generated by `llman sdd update-skills`.
- Codex: use generated `llman-sdd-*` skills; do not rely on slash commands/custom prompts.
- Do not add other tool-specific slash commands by hand.

OPSX quickstart:
- `/opsx:onboard` (guided walkthrough)
- `/opsx:new <id|description>` (start a change)
- `/opsx:continue <id>` (create next artifact)
- `/opsx:ff <id>` (create all artifacts quickly)
- `/opsx:apply <id>` (implement tasks)
- `/opsx:verify <id>` (verify implementation vs artifacts)
- `/opsx:sync <id>` (manual delta spec sync; no archive)
- `/opsx:archive <id>` (archive + merge deltas)
- `/opsx:bulk-archive` (archive multiple changes)

## Phase 1: Create a change
Create a proposal when:
- new capability or feature
- breaking change (API, schema)
- architecture or pattern shift
- performance/security work that changes behavior

Skip proposals for:
- bug fixes restoring expected behavior
- typos/formatting/comments
- non-breaking dependency updates
- config-only changes

Workflow:
1. Read `llmanspec/project.md`.
2. Check current state: `llman sdd list` and `llman sdd list --specs`.
3. Choose a unique change id: kebab-case, verb prefix (`add-`, `update-`, `remove-`, `refactor-`).
4. Create `llmanspec/changes/<change-id>/` with `proposal.md`, `tasks.md`, and optional `design.md`.
5. For each affected capability, add `llmanspec/changes/<change-id>/specs/<capability>/spec.md` using:
   - `## ADDED|MODIFIED|REMOVED|RENAMED Requirements`
   - Each requirement must include at least one `#### Scenario:`
6. Validate: `llman sdd validate <change-id> --strict --no-interactive`.

## Phase 2: Implement
Track these steps as TODOs and complete them in order.
1. Read `proposal.md`.
2. Read `design.md` if present.
3. Read `tasks.md`.
4. Implement tasks in order.
5. Update `tasks.md` checkboxes only when done.
6. Do not implement before proposal approval.

## Phase 3: Archive
After deployment:
- Run `llman sdd archive <change-id>`.
- Use `--skip-specs` for tooling-only changes.
- Validate again: `llman sdd validate --strict --no-interactive`.

## Spec format essentials
- Specs must include YAML frontmatter with:
  - `llman_spec_valid_scope`
  - `llman_spec_valid_commands`
  - `llman_spec_evidence`
- Each requirement text must contain `SHALL` or `MUST`.
- Scenario headers must be `#### Scenario:`.

Keep this managed block so `llman sdd update` can refresh it.
